# üì∞ News Aggregator API

A robust and scalable RESTful API for aggregating news articles from multiple sources with personalized user feeds. Built with Laravel 11, following SOLID principles and modern software architecture patterns.

[![Laravel](https://img.shields.io/badge/Laravel-11-red.svg)](https://laravel.com)
[![PHP](https://img.shields.io/badge/PHP-8.2+-blue.svg)](https://php.net)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

---

## üìã Table of Contents

- [Features](#-features)
- [Architecture](#-architecture)
- [Tech Stack](#-tech-stack)
- [Installation](#-installation)
- [Configuration](#-configuration)
- [Database Setup](#-database-setup)
- [Usage](#-usage)
- [API Documentation](#-api-documentation)
- [Testing](#-testing)
- [Project Structure](#-project-structure)
- [Development](#-development)
- [Performance Optimization](#-performance-optimization)
- [Contributing](#-contributing)
- [License](#-license)

---

## ‚ú® Features

### Core Features
- üîÑ **Multi-Source Aggregation** - Fetch articles from The Guardian, NewsAPI, and New York Times
- üîç **Advanced Search** - Full-text search with MySQL full-text indexing
- üéØ **Personalized Feed** - User-specific article recommendations based on preferences
- üè∑Ô∏è **Smart Filtering** - Filter by sources, categories, authors, and date ranges
- üì± **RESTful API** - Clean, documented, and versioned API endpoints
- üîê **Authentication** - Secure token-based auth with Laravel Sanctum
- üìä **API Documentation** - Interactive Swagger/OpenAPI documentation

### Advanced Features
- ‚ö° **Performance Optimization** - Database indexes and query optimization
- üíæ **Caching Strategy** - Multi-tier caching with tag-based invalidation
- üé® **API Resources** - Consistent JSON response formatting
- ‚úÖ **Request Validation** - FormRequest validation for all endpoints
- üîÑ **Batch Processing** - Efficient article upsert with deduplication
- üèóÔ∏è **Clean Architecture** - Repository pattern, service layer, SOLID principles
- üìà **Scalable Design** - Modular architecture ready for horizontal scaling

---

## üèõÔ∏è Architecture

The application follows a **layered architecture** with clear separation of concerns:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   HTTP Layer (Controllers)                ‚îÇ
‚îÇ  - Handle HTTP requests/responses                         ‚îÇ
‚îÇ  - Validate input (FormRequests)                          ‚îÇ
‚îÇ  - Transform output (API Resources)                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Business Logic Layer (Services)              ‚îÇ
‚îÇ  - ArticleService (validation, deduplication)             ‚îÇ
‚îÇ  - PersonalizedFeedService (feed orchestration)           ‚îÇ
‚îÇ  - UserPreferenceFilterBuilder (filter building)          ‚îÇ
‚îÇ  - CategoryService (category management)                  ‚îÇ
‚îÇ  - CacheService (caching strategy)                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           Data Access Layer (Repositories)                ‚îÇ
‚îÇ  - ArticleRepository (database operations)                ‚îÇ
‚îÇ  - Query optimization & caching                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                Integration Layer (Adapters)               ‚îÇ
‚îÇ  - GuardianAdapter (The Guardian API)                     ‚îÇ
‚îÇ  - NewsApiAdapter (NewsAPI integration)                   ‚îÇ
‚îÇ  - NytAdapter (New York Times API)                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Design Patterns
- **Repository Pattern** - Abstract data access logic
- **Adapter Pattern** - Integrate different news APIs with unified interface
- **Service Layer** - Encapsulate business logic
- **Dependency Injection** - Loose coupling via interfaces
- **DTO Pattern** - Type-safe data transfer
- **Strategy Pattern** - Flexible filter building

### SOLID Principles
- ‚úÖ **Single Responsibility** - Each class has one reason to change
- ‚úÖ **Open/Closed** - Open for extension, closed for modification
- ‚úÖ **Liskov Substitution** - Interface-based implementations
- ‚úÖ **Interface Segregation** - Small, focused interfaces
- ‚úÖ **Dependency Inversion** - Depend on abstractions, not concretions

---

## üõ†Ô∏è Tech Stack

### Backend
- **Framework:** Laravel 11
- **PHP:** 8.2+
- **Database:** SQLite (development) / MySQL (production)
- **Authentication:** Laravel Sanctum
- **API Documentation:** L5-Swagger (OpenAPI 3.0)

### Key Packages
- `guzzlehttp/guzzle` - HTTP client for external APIs
- `darkaonline/l5-swagger` - API documentation
- `laravel/sanctum` - API authentication

### Development Tools
- **Code Style:** Laravel Pint
- **Testing:** PHPUnit
- **Dependency Management:** Composer

---

## üì¶ Installation

### Prerequisites
- PHP >= 8.2
- Composer
- SQLite or MySQL
- Git

### Step 1: Clone Repository
```bash
git clone https://github.com/yourusername/innoscripta.git
cd innoscripta
```

### Step 2: Install Dependencies
```bash
composer install
```

### Step 3: Environment Setup
```bash
# Copy environment file
cp .env.example .env

# Generate application key
php artisan key:generate
```

### Step 4: Configure Environment
Edit `.env` file with your settings:
```env
APP_NAME="News Aggregator"
APP_ENV=local
APP_DEBUG=true
APP_URL=http://news-aggregator.test

DB_CONNECTION=sqlite
# DB_CONNECTION=mysql (for production)

# News API Keys
GUARDIAN_API_KEY=your_guardian_api_key
GUARDIAN_BASE_URL=https://content.guardianapis.com

NEWSAPI_KEY=your_newsapi_key
NEWSAPI_BASE_URL=https://newsapi.org/v2

NYTIMES_API_KEY=your_nytimes_api_key
NYTIMES_BASE_URL=https://api.nytimes.com/svc

# Cache Configuration
CACHE_DRIVER=file
# CACHE_DRIVER=redis (for production)
```

---

## ‚öôÔ∏è Configuration

### Get API Keys

1. **The Guardian** - [Get API Key](https://open-platform.theguardian.com/access/)
2. **NewsAPI** - [Get API Key](https://newsapi.org/register)
3. **New York Times** - [Get API Key](https://developer.nytimes.com/get-started)

### Cache Configuration

For production, use Redis:
```bash
# Install Redis (macOS)
brew install redis
brew services start redis

# Update .env
CACHE_DRIVER=redis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379
```

---

## üóÑÔ∏è Database Setup

### Step 1: Run Migrations
```bash
php artisan migrate
```

This creates:
- `users` - User accounts
- `sources` - News sources (Guardian, NewsAPI, NYT)
- `categories` - Article categories
- `articles` - News articles with full-text indexes
- `user_preferences` - User preference settings
- `user_preferred_sources` - User's preferred news sources
- `user_preferred_categories` - User's preferred categories
- `user_preferred_authors` - User's preferred authors
- `personal_access_tokens` - Sanctum authentication tokens

### Step 2: Seed Initial Data
```bash
# Seed news sources
php artisan db:seed --class=SourcesSeeder
```

### Step 3: Fetch Articles
```bash
# Fetch articles from all sources
php artisan news:fetch

# Fetch from specific source
php artisan news:fetch --source=guardian
```

### Step 4: Seed User Preferences (Optional)
```bash
# After fetching articles, seed test users with preferences
php artisan db:seed --class=UserPreferencesSeeder
```

This creates test users:
- `tech@example.com` (password: `password`) - Tech enthusiast
- `politics@example.com` (password: `password`) - Politics follower
- `business@example.com` (password: `password`) - Business reader
- `general@example.com` (password: `password`) - General reader

---

## üöÄ Usage

### Start Development Server
```bash
php artisan serve
```

Server will start at `http://news-aggregator.test`

### Fetch Latest Articles
```bash
# Fetch from all sources
php artisan news:fetch

# Fetch from specific source
php artisan news:fetch --source=guardian
```

### Cache Management
```bash
# Clear specific cache
php artisan cache:clear-app articles
php artisan cache:clear-app sources
php artisan cache:clear-app categories

# Clear all application cache
php artisan cache:clear-app all

# View cache statistics
php artisan cache:stats
```

---

## üìö API Documentation

### Interactive Documentation
Access Swagger UI at:
```
http://news-aggregator.test/api/documentation
```

Features:
- üîç Browse all endpoints
- üß™ Test endpoints directly in browser
- üîê Authenticate with Bearer token
- üìù View request/response examples
- ‚úÖ See validation rules

### Quick API Overview

#### Authentication Endpoints
```bash
# Login
POST /api/v1/login
Body: { "email": "tech@example.com", "password": "password" }

# Get user info
GET /api/v1/me
Headers: Authorization: Bearer {token}

# Logout
POST /api/v1/logout
Headers: Authorization: Bearer {token}
```

#### Public Endpoints
```bash
# Get articles with filters
GET /api/v1/articles
Parameters:
  - searchTerm: string (search in title, description, content)
  - source[]: array (filter by sources: guardian, newsapi, nyt)
  - category[]: array (filter by categories)
  - author: string
  - from_date: date (YYYY-MM-DD)
  - to_date: date (YYYY-MM-DD)
  - sort: string (published_at, created_at, title)
  - order: string (asc, desc)
  - per_page: integer (1-100)
  - page: integer

# Example
GET /api/v1/articles?searchTerm=technology&source[]=guardian&category[]=Technology&per_page=10
```

#### Authenticated Endpoints
```bash
# Get personalized feed
GET /api/v1/user/feed
Headers: Authorization: Bearer {token}
Parameters: (same as /articles, extends user preferences)

# Example
GET /api/v1/user/feed?searchTerm=climate&per_page=5
```

### Example cURL Commands

**Login:**
```bash
curl -X POST "http://news-aggregator.test/api/v1/login" \
  -H "Accept: application/json" \
  -H "Content-Type: application/json" \
  -d '{"email":"tech@example.com","password":"password"}'
```

**Get Articles:**
```bash
curl -X GET "http://news-aggregator.test/api/v1/articles?source[]=guardian&category[]=Technology&per_page=10" \
  -H "Accept: application/json"
```

**Get Personalized Feed:**
```bash
curl -X GET "http://news-aggregator.test/api/v1/user/feed" \
  -H "Accept: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

---

## üß™ Testing

### Run Tests
```bash
# Run all tests
php artisan test

# Run specific test suite
php artisan test --testsuite=Feature
php artisan test --testsuite=Unit

# Run with coverage
php artisan test --coverage

# Run specific test file
./vendor/bin/phpunit tests/Unit/UserPreferenceFilterBuilderTest.php --testdox
```

### Unit Tests Coverage

#### `UserPreferenceFilterBuilderTest` ‚úÖ
Comprehensive tests for filter building logic (11 tests, 55 assertions):
- ‚úÖ Building filters from user preferences only
- ‚úÖ Building filters with empty preferences
- ‚úÖ Overriding preferences with request parameters
- ‚úÖ Expanding source filters by merging with request
- ‚úÖ Expanding category filters by merging with request
- ‚úÖ Removing duplicate sources when merging
- ‚úÖ Normalizing single value input to array
- ‚úÖ Adding date range filters from request
- ‚úÖ Complete scenario with all filter types
- ‚úÖ Handling null request

**Test File:** `tests/Unit/UserPreferenceFilterBuilderTest.php`

---

#### `ArticleServiceTest` ‚úÖ
Comprehensive tests for article business logic (16 tests, 51 assertions):
- ‚úÖ Processing empty articles array
- ‚úÖ Removing duplicates (keeps last occurrence)
- ‚úÖ Rejecting articles with missing required fields
- ‚úÖ Rejecting articles with invalid URL
- ‚úÖ Rejecting articles with title too long
- ‚úÖ Accepting articles with max length title (255 chars)
- ‚úÖ Processing valid articles calls repository
- ‚úÖ Cache invalidation when articles inserted
- ‚úÖ Cache invalidation when articles updated
- ‚úÖ No cache invalidation when no changes
- ‚úÖ Multiple validation errors tracking
- ‚úÖ Articles without merchant_id removed during deduplication
- ‚úÖ Complete flow with mixed articles (valid, invalid, duplicates)
- ‚úÖ Repository failure propagation
- ‚úÖ Optional fields can be empty
- ‚úÖ Valid URL formats acceptance (HTTP, HTTPS, with paths)

**Test File:** `tests/Unit/ArticleServiceTest.php`

---

#### `NewsAggregatorServiceTest` ‚úÖ
Comprehensive tests for news fetching orchestration (11 tests, 92 assertions):
- ‚úÖ Fetching from all sources successfully
- ‚úÖ Fetching from single source successfully
- ‚úÖ Handling empty article responses
- ‚úÖ Exception handling during fetch
- ‚úÖ Mixed results (inserted, updated, failed, skipped)
- ‚úÖ DTO to array conversion
- ‚úÖ Continuing when one source fails
- ‚úÖ Response structure validation
- ‚úÖ Error response structure
- ‚úÖ No sources configured
- ‚úÖ Default skipped count handling

**Test File:** `tests/Unit/NewsAggregatorServiceTest.php`

### Manual Testing with Postman
1. Import the OpenAPI spec from `storage/api-docs/api-docs.json`
2. Or use the Swagger UI at `http://news-aggregator.test/api/documentation`

### Test Users (after seeding)
- Email: `tech@example.com` | Password: `password`
- Email: `politics@example.com` | Password: `password`
- Email: `business@example.com` | Password: `password`
- Email: `general@example.com` | Password: `password`

---

## üìÅ Project Structure

```
innoscripta/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ Console/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Commands/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ FetchArticlesCommand.php      # Artisan command to fetch articles
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ CacheClearCommand.php         # Cache management
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ CacheStatsCommand.php         # Cache statistics
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Contracts/                            # Interface contracts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ArticleRepositoryInterface.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NewsSourceInterface.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PersonalizedFeedServiceInterface.php
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ DTO/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ArticleDTO.php                    # Data Transfer Object
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Http/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Controllers/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Api/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ArticleController.php     # Public articles endpoint
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ AuthController.php        # Authentication
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ UserFeedController.php    # Personalized feed
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Requests/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Api/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ArticleIndexRequest.php   # Validation rules
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Resources/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ArticleResource.php           # Article JSON transformation
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ SourceResource.php
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ CategoryResource.php
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Article.php                       # Article model with scopes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Category.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Source.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ User.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UserPreference.php
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Repositories/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ArticleRepository.php             # Database operations
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Adapters/                         # News API adapters
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GuardianAdapter.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NewsApiAdapter.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NytAdapter.php
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ArticleService.php                # Article business logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CacheService.php                  # Caching strategy
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CategoryService.php               # Category management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HttpClientService.php             # HTTP requests
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NewsAggregatorService.php         # Orchestrates fetching
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PersonalizedFeedService.php       # Personalized feed
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UserPreferenceFilterBuilder.php   # Filter building
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ Utils/
‚îÇ       ‚îî‚îÄ‚îÄ DateTimeHelper.php                # DateTime utilities
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ news.php                              # News sources configuration
‚îÇ   ‚îî‚îÄ‚îÄ l5-swagger.php                        # API documentation config
‚îÇ
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ migrations/                           # Database schema
‚îÇ   ‚îî‚îÄ‚îÄ seeders/
‚îÇ       ‚îú‚îÄ‚îÄ SourcesSeeder.php                 # Seeds news sources
‚îÇ       ‚îî‚îÄ‚îÄ UserPreferencesSeeder.php         # Seeds test users
‚îÇ
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îî‚îÄ‚îÄ api.php                               # API routes
‚îÇ
‚îî‚îÄ‚îÄ storage/
    ‚îî‚îÄ‚îÄ api-docs/
        ‚îî‚îÄ‚îÄ api-docs.json                     # OpenAPI specification
```

---

## üíª Development

### Code Style
```bash
# Format code with Laravel Pint
./vendor/bin/pint
```

### Generate API Documentation
```bash
# After modifying API annotations
php artisan l5-swagger:generate
```

### Clear All Caches
```bash
# Clear application cache
php artisan cache:clear

# Clear configuration cache
php artisan config:clear

# Clear route cache
php artisan route:clear

# Clear view cache
php artisan view:clear
```

### Debugging
```bash
# View routes
php artisan route:list

# View database queries
# Add to .env: DB_LOG_QUERIES=true

# Tail logs
tail -f storage/logs/laravel.log
```

---

## ‚ö° Performance Optimization

### Database Indexes
The application uses strategic indexes for optimal query performance:

```sql
-- Single column indexes
INDEX on articles.published_at

-- Composite indexes
INDEX on (source_id, published_at)
INDEX on (category_id, published_at)

-- Full-text indexes (MySQL)
FULLTEXT INDEX on (title, description, content)
```

### Caching Strategy
Multi-tier caching with different TTLs:

| Cache Type | TTL | Invalidation |
|------------|-----|--------------|
| Query Results | 30 min | Tag-based |
| User Feed | 15 min | Tag-based |
| Metadata (sources/categories) | 1 hour | Tag-based |
| Articles | 2 hours | Tag-based |

**Cache Commands:**
```bash
# Clear specific caches
php artisan cache:clear-app articles
php artisan cache:clear-app sources
php artisan cache:clear-app categories
php artisan cache:clear-app metadata

# Clear all
php artisan cache:clear-app all
```

### Query Optimization
- Eager loading relationships (`with()`)
- Query scopes for reusable filters
- Batch upserts for article storage
- Pagination for large result sets

---

## üîÑ Scheduled Tasks (Optional)

Add to `app/Console/Kernel.php`:

```php
protected function schedule(Schedule $schedule)
{
    // Fetch articles every hour
    $schedule->command('news:fetch')
        ->hourly()
        ->withoutOverlapping();
    
    // Clear old cache daily
    $schedule->command('cache:clear-app all')
        ->daily();
}
```

Run scheduler:
```bash
php artisan schedule:work
```

---

## üéØ Best Practices Implemented

### Code Quality
- ‚úÖ SOLID principles adherence
- ‚úÖ Repository pattern for data access
- ‚úÖ Service layer for business logic
- ‚úÖ Dependency injection throughout
- ‚úÖ Type-safe with PHP 8.2+ features
- ‚úÖ Comprehensive PHPDoc comments

### Security
- ‚úÖ Token-based authentication
- ‚úÖ Request validation with FormRequests
- ‚úÖ SQL injection prevention (Eloquent ORM)
- ‚úÖ Rate limiting on API routes
- ‚úÖ Environment variable configuration

### Performance
- ‚úÖ Database query optimization
- ‚úÖ Strategic indexes
- ‚úÖ Multi-tier caching
- ‚úÖ Batch processing
- ‚úÖ Lazy loading where appropriate

### Maintainability
- ‚úÖ Clear directory structure
- ‚úÖ Separation of concerns
- ‚úÖ Interface-based design
- ‚úÖ Comprehensive documentation
- ‚úÖ Consistent naming conventions

---

## ü§ù Contributing

Contributions are welcome! Please follow these guidelines:

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

### Code Standards
- Follow PSR-12 coding standards
- Write PHPDoc comments for all methods
- Add tests for new features
- Update API documentation (Swagger annotations)
- Run Laravel Pint before committing

---

## üêõ Troubleshooting

### Common Issues

**Issue: "Class not found" errors**
```bash
composer dump-autoload
```

**Issue: Cache not clearing**
```bash
php artisan cache:clear
php artisan config:clear
php artisan route:clear
```

**Issue: API not fetching articles**
- Check your API keys in `.env`
- Verify API rate limits
- Check logs: `storage/logs/laravel.log`

**Issue: Swagger UI not showing**
```bash
php artisan l5-swagger:generate
php artisan route:clear
```

**Issue: Database connection error**
- Check `DB_CONNECTION` in `.env`
- Verify SQLite file exists: `database/database.sqlite`
- For MySQL, check credentials and server status

---

## üìÑ License

This project is open-sourced software licensed under the [MIT license](LICENSE).

---

## üë• Authors

- **Your Name** - *Initial work* - [Your GitHub](https://github.com/yourusername)

---

## üôè Acknowledgments

- The Guardian API for news data
- NewsAPI for aggregated news sources
- New York Times API for quality journalism
- Laravel community for excellent documentation
- Open source contributors

---

## üìû Support

For support, email support@newsaggregator.com or open an issue on GitHub.

---

## üó∫Ô∏è Roadmap

### Phase 1: Core Features ‚úÖ
- [x] Multi-source news aggregation
- [x] Article search and filtering
- [x] User authentication
- [x] Personalized feeds
- [x] API documentation

### Phase 2: Enhancements (Planned)
- [ ] Bookmarking articles
- [ ] Article recommendations (ML-based)
- [ ] Email digest notifications
- [ ] Advanced analytics dashboard
- [ ] Social sharing features

### Phase 3: Scaling (Future)
- [ ] Laravel Scout (Elasticsearch) integration
- [ ] Redis caching in production
- [ ] Horizontal scaling with load balancers
- [ ] CDN for media assets
- [ ] GraphQL API endpoint

---

## üìä Statistics

- **Total Endpoints:** 5
- **News Sources:** 3 (The Guardian, NewsAPI, New York Times)
- **Database Tables:** 10
- **Service Classes:** 8
- **Repositories:** 1
- **API Resources:** 3
- **Lines of Code:** ~5,000+

---

**Built with ‚ù§Ô∏è using Laravel 11**
